<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blackjack Multiplayer</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: green;
    color: white;
    text-align: center;
    padding: 20px;
}
button {
    padding: 10px 20px;
    margin: 5px;
    font-size: 16px;
    cursor: pointer;
}
.cards {
    display: flex;
    justify-content: center;
    margin: 5px 0;
}
.card {
    background: white;
    color: black;
    border-radius: 8px;
    width: 50px;
    height: 70px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 5px;
    font-weight: bold;
    font-size: 20px;
}
.player-box {
    border: 2px solid white;
    margin: 15px auto;
    padding: 10px;
    width: 80%;
}
.active {
    background: rgba(255,255,255,0.2);
}
</style>
</head>
<body>

<h1>Blackjack</h1>
<button onclick="location.href='gameforming.html'">Terug naar Home</button>
<br><br>

<button onclick="addPlayer()">âž• Nieuwe speler toevoegen</button>

<h2>Dealer</h2>
<div class="cards" id="dealer-cards"></div>
<p id="dealer-score">Score: ?</p>

<div id="players"></div>

<button id="hit-btn">Hit</button>
<button id="stand-btn">Stand</button>
<button onclick="startGame()">Opnieuw</button>

<h2 id="result"></h2>

<script>
const suits = ['â™ ','â™¥','â™¦','â™£'];
const values = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];

let deck = [];
let players = [];
let dealerHand = [];
let currentPlayer = 0;
let gameEnded = false;

function createDeck() {
    deck = [];
    for (let s of suits)
        for (let v of values)
            deck.push({suit:s, value:v});
}

function shuffleDeck() {
    for (let i = deck.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
    }
}

function cardValue(card) {
    if (card.value === 'A') return 11;
    if (['K','Q','J'].includes(card.value)) return 10;
    return parseInt(card.value);
}

function score(hand) {
    let total = hand.reduce((s,c)=>s+cardValue(c),0);
    let aces = hand.filter(c=>c.value==='A').length;
    while (total > 21 && aces--) total -= 10;
    return total;
}

function addPlayer() {
    players.push({ hand: [], done: false });
    renderPlayers();
}

function startGame() {
    createDeck();
    shuffleDeck();
    dealerHand = [deck.pop(), deck.pop()];
    players.forEach(p => {
        p.hand = [deck.pop(), deck.pop()];
        p.done = false;
    });
    currentPlayer = 0;
    gameEnded = false;
    document.getElementById("result").textContent = "";
    render();
}

function hit() {
    if (gameEnded) return;
    let p = players[currentPlayer];
    p.hand.push(deck.pop());
    if (score(p.hand) > 21) p.done = true;
    nextPlayer();
}

function stand() {
    players[currentPlayer].done = true;
    nextPlayer();
}

function nextPlayer() {
    while (currentPlayer < players.length && players[currentPlayer].done) {
        currentPlayer++;
    }
    if (currentPlayer >= players.length) dealerTurn();
    render();
}

function dealerTurn() {
    while (score(dealerHand) < 17) {
        dealerHand.push(deck.pop());
    }
    gameEnded = true;
    showResults();
}

function showResults() {
    let text = "";
    let dealerScore = score(dealerHand);
    players.forEach((p,i)=>{
        let ps = score(p.hand);
        if (ps > 21) text += `Speler ${i+1}: Bust âŒ\n`;
        else if (dealerScore > 21 || ps > dealerScore) text += `Speler ${i+1}: Wint âœ…\n`;
        else if (ps < dealerScore) text += `Speler ${i+1}: Verliest âŒ\n`;
        else text += `Speler ${i+1}: Gelijkspel ðŸ¤\n`;
    });
    document.getElementById("result").textContent = text;
}

function renderPlayers() {
    const div = document.getElementById("players");
    div.innerHTML = "";
    players.forEach((p,i)=>{
        const box = document.createElement("div");
        box.className = "player-box" + (i===currentPlayer && !gameEnded ? " active":"");
        box.innerHTML = `<h3>Speler ${i+1}</h3>
            <div class="cards">${p.hand.map(c=>`<div class="card">${c.value+c.suit}</div>`).join("")}</div>
            <p>Score: ${score(p.hand)}</p>`;
        div.appendChild(box);
    });
}

function render() {
    renderPlayers();
    document.getElementById("dealer-cards").innerHTML =
        dealerHand.map((c,i)=>`<div class="card">${gameEnded || i===0 ? c.value+c.suit : "?"}</div>`).join("");
    document.getElementById("dealer-score").textContent =
        "Score: " + (gameEnded ? score(dealerHand) : "?");
}

document.getElementById("hit-btn").onclick = hit;
document.getElementById("stand-btn").onclick = stand;

// altijd starten met 1 speler
addPlayer();
startGame();
</script>

</body>
</html>
