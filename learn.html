<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Learnforming</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #1e1e2f;
      color: white;
      padding: 40px;
      text-align: center;
    }
    textarea, input, select, button {
      font-size: 16px;
      padding: 10px;
      margin: 10px;
      border-radius: 8px;
      border: none;
    }
    textarea {
      width: 90%;
      height: 200px;
      resize: vertical;
    }
    button {
      background-color: #4caf50;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background-color: #45a049;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <h1>Learnforming</h1>

  <div>
    <input type="text" id="listName" placeholder="Naam van de lijst">
    <input type="text" id="language" placeholder="Taal (bijv. Frans)">
    <br>
    <textarea id="wordInput" placeholder="Typ woorden zoals: hond = chien"></textarea>
    <br>
    <button onclick="saveList()">Opslaan</button>
  </div>

  <hr>

  <div>
    <select id="listSelector">
      <option value="">-- Kies een lijst --</option>
    </select>
    <button onclick="startQuiz()">Start Quiz</button>
  </div>

  <div id="quiz" class="hidden">
    <h2 id="questionText"></h2>
    <input type="text" id="answerInput" placeholder="Jouw antwoord">
    <button onclick="checkAnswer()">Beantwoord</button>
    <p id="feedback"></p>
  </div>

  <script>
    let currentList = [];
    let currentIndex = 0;
    let currentLanguage = "de taal";

    function saveList() {
      const name = document.getElementById("listName").value.trim();
      const lines = document.getElementById("wordInput").value.trim().split("\n");
      if (!name || lines.length === 0) return;

      const list = {};
      for (let line of lines) {
        const [left, right] = line.split("=").map(x => x?.trim());
        if (left && right) {
          list[left] = right;
        }
      }

      const lists = JSON.parse(localStorage.getItem("lists") || "{}");
      lists[name] = list;
      localStorage.setItem("lists", JSON.stringify(lists));
      updateSelector();
      alert("Lijst opgeslagen!");
    }

    function updateSelector() {
      const selector = document.getElementById("listSelector");
      const lists = JSON.parse(localStorage.getItem("lists") || "{}");
      selector.innerHTML = `<option value="">-- Kies een lijst --</option>`;
      for (let name in lists) {
        const option = document.createElement("option");
        option.value = name;
        option.textContent = name;
        selector.appendChild(option);
      }
    }

    function startQuiz() {
      const name = document.getElementById("listSelector").value;
      const lists = JSON.parse(localStorage.getItem("lists") || "{}");
      currentList = Object.entries(lists[name] || {});
      if (currentList.length === 0) return;

      // Laad lijst in tekstvak en veld
      document.getElementById("wordInput").value = currentList.map(([k, v]) => `${k} = ${v}`).join("\n");
      document.getElementById("listName").value = name;

      // Laad taal of gebruik standaard
      currentLanguage = document.getElementById("language").value.trim() || "de taal";

      document.getElementById("quiz").classList.remove("hidden");
      nextQuestion();
    }

    function nextQuestion() {
      const random = Math.floor(Math.random() * currentList.length);
      currentIndex = random;
      const [word] = currentList[currentIndex];
      document.getElementById("questionText").textContent = `Wat is "${word}" in het ${currentLanguage}?`;
      document.getElementById("answerInput").value = "";
      document.getElementById("feedback").textContent = "";
    }

    function checkAnswer() {
      const userAnswer = document.getElementById("answerInput").value.trim().toLowerCase();
      const correctAnswer = currentList[currentIndex][1].toLowerCase();
      const feedback = document.getElementById("feedback");
      if (userAnswer === correctAnswer) {
        feedback.textContent = "✅ Correct!";
        feedback.style.color = "lightgreen";
      } else {
        feedback.textContent = `❌ Fout! Het juiste antwoord is "${currentList[currentIndex][1]}"`;
        feedback.style.color = "tomato";
      }
      setTimeout(nextQuestion, 2000);
    }

    // Initialiseer selector bij laden
    updateSelector();
  </script>
</body>
</html>
